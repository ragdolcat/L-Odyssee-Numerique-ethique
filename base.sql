-- SQL File for Digital Sovereignty Questions
-- Compatible with MySQL/MariaDB. Use JSON_TEXT column type for flexibility with PDO.
--
-- Table: questions_souverainete
--
-- Colonnes :
--   id: Identifiant unique.
--   type: Type de question ('choice', 'match', 'gap').
--   question_text: Le texte principal de la question.
--   data_json: Contient les options, paires, ou mots √† compl√©ter (format JSON).
--   description: L'explication p√©dagogique de la r√©ponse.
--   analogy: L'analogie concr√®te pour la vulgarisation.

DROP TABLE IF EXISTS `questions_souverainete`;

CREATE TABLE `questions_souverainete` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(10) NOT NULL,
  `question_text` TEXT NOT NULL,
  `data_json` TEXT NOT NULL,
  `description` TEXT NOT NULL,
  `analogy` TEXT DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE `leaderboard` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `player_name` VARCHAR(50) NOT NULL,
  `score` INT(11) NOT NULL,
  `date_achieved` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4

--
-- Insertion des donn√©es (35 questions)
--

INSERT INTO `questions_souverainete` (`type`, `question_text`, `data_json`, `description`, `analogy`) VALUES
-- --- TYPE: QCM (CHOICE) ---
('choice', 'L''√©cole stocke mes photos sur un ''Cloud'' am√©ricain. Qui a le droit de les regarder selon la loi am√©ricaine ?', '{"options": ["Seulement moi", "Le directeur de l''√©cole", "La justice am√©ricaine (CLOUD Act)", "Personne"], "correct": 2}', 'Les lois am√©ricaines permettent √† leurs services de renseignement d''acc√©der aux donn√©es, m√™me si elles sont stock√©es en France.', 'C''est comme si vous louiez un coffre-fort √† Paris, mais que la police de New York avait le double des cl√©s.'),
('choice', 'Pourquoi dit-on que Google ou Facebook ne sont pas ''gratuits'' ?', '{"options": ["Ils demandent des dons", "Ils vendent mes donn√©es personnelles (pub)", "L''√âtat paie pour nous", "C''est une erreur"], "correct": 1}', 'Leur mod√®le √©conomique est la publicit√© cibl√©e. Ils analysent tout ce que vous faites pour vendre ce profil √† des marques.', 'Si le sandwich est gratuit, c''est que vous √™tes le jambon !'),
('choice', 'Je veux envoyer un gros fichier vid√©o √† mes √©l√®ves sans passer par Google/WeTransfer.', '{"options": ["Je l''imprime", "J''utilise un ''Drive'' libre (Nextcloud)", "Je le coupe en morceaux", "C''est impossible"], "correct": 1}', 'Des outils comme Nextcloud permettent √† l''√©cole de g√©rer ses propres fichiers sans qu''ils soient analys√©s par des robots publicitaires.', 'C''est la diff√©rence entre mettre vos documents dans votre armoire priv√©e (Nextcloud) ou les poser sur un banc public (Google).'),
('choice', 'L''√©cole ach√®te uniquement des tablettes d''une marque tr√®s ferm√©e. Quel est le risque ?', '{"options": ["Elles sont trop jolies", "Le verrouillage technologique (d√©pendance)", "Elles vont exploser", "Aucun risque"], "correct": 1}', 'Si on s''habitue √† un seul syst√®me, il devient tr√®s co√ªteux et difficile d''en changer plus tard (logiciels incompatibles, rachat de mat√©riel...).', 'C''est comme acheter une machine √† caf√© qui n''accepte qu''une seule marque de capsules tr√®s ch√®res.'),
('choice', 'Quel est le principal avantage de LibreOffice par rapport √† Microsoft Office dans le cadre scolaire ?', '{"options": ["C''est plus rapide", "C''est un Logiciel Libre dont le code est v√©rifiable", "Il a plus de fonctionnalit√©s", "Il est pr√©install√© partout"], "correct": 1}', 'Le code est public, ce qui garantit qu''il n''y a pas de fonction cach√©e d''espionnage ou de t√©l√©m√©trie.', 'C''est comme avoir un plan d√©taill√© du moteur de votre voiture.'),
('choice', 'Un format de fichier ''ouvert'' (comme .odt) garantit :', '{"options": ["Que le fichier est petit", "La p√©rennit√© de l''information et l''interop√©rabilit√©", "Qu''il est toujours modifiable", "Rien du tout"], "correct": 1}', 'Si l''entreprise qui a cr√©√© le logiciel fait faillite, un format ouvert pourra toujours √™tre lu par d''autres logiciels.', 'Votre vieille cassette VHS peut encore √™tre lue sur n''importe quel magn√©toscope, car le format est connu de tous.'),
('choice', 'Pourquoi l''utilisation d''un navigateur comme Firefox est pr√©f√©rable √† Chrome ?', '{"options": ["Il est plus joli", "Il n''est pas bas√© sur la technologie de Google", "Il est plus rapide", "Il est mieux optimis√© pour le mobile"], "correct": 1}', 'Firefox utilise son propre moteur (Gecko), √©vitant de laisser Google d√©cider seul des standards du Web mondial.', 'Avoir plusieurs marques de voitures diff√©rentes est mieux que si tout le monde utilisait le moteur d''une seule marque.'),
('choice', 'Quel est le but principal de la loi europ√©enne RGPD ?', '{"options": ["Taxer les GAFAM", "Prot√©ger les donn√©es personnelles des citoyens", "R√©guler le commerce √©lectronique", "Standardiser le Wi-Fi"], "correct": 1}', 'Le R√®glement G√©n√©ral sur la Protection des Donn√©es vous donne le contr√¥le de vos informations personnelles.', 'C''est votre droit de savoir qui sonne √† la porte et pourquoi.'),
('choice', 'Si l''√©cole met en place un ENT souverain, cela signifie qu''elle...', '{"options": ["Le loue √† Google", "L''h√©berge sur des serveurs sous contr√¥le europ√©en", "N''a plus besoin d''internet", "N''utilise que des Macs"], "correct": 1}', 'La souverainet√© num√©rique passe par l''h√©bergement sur le territoire o√π s''applique le droit europ√©en.', 'C''est comme avoir votre propre jardin plut√¥t que de faire pousser vos fruits chez le voisin.'),
('choice', 'Quel risque principal pose le concept de ''T√©l√©m√©trie'' pour l''√©cole ?', '{"options": ["Le logiciel devient trop rapide", "Le logiciel envoie des donn√©es d''utilisation d√©taill√©es √† l''√©diteur", "Le logiciel devient lent", "La connexion Wi-Fi est coup√©e"], "correct": 1}', 'La t√©l√©m√©trie peut transmettre des informations sur les habitudes d''utilisation et le comportement des √©l√®ves sans leur consentement √©clair√©.', 'C''est un mouchard qui rapporte tout ce que vous faites √† la maison, m√™me ce qui n''a rien √† voir avec le logiciel.'),

-- --- TYPE: ASSOCIATION (MATCH) ---
('match', 'Reliez chaque g√©ant du Web (GAFAM) √† son alternative √©thique et libre !', '[{"left": "YouTube üìπ", "right": "PeerTube üêô"}, {"left": "Google Drive üìÅ", "right": "Nextcloud ‚òÅÔ∏è"}, {"left": "Zoom üé•", "right": "BigBlueButton üéì"}, {"left": "WhatsApp üí¨", "right": "Signal üîí"}]', 'Il existe une alternative libre pour presque tous les outils connus ! Ces alternatives respectent votre vie priv√©e.', 'C''est comme choisir entre un supermarch√© g√©ant qui vous surveille (GAFAM) et une coop√©rative locale de confiance (Libre).'),
('match', 'Associez le probl√®me √† sa cons√©quence.', '[{"left": "Donn√©es aux USA üá∫üá∏", "right": "Espionnage potentiel üïµÔ∏è"}, {"left": "Logiciel ferm√© üîí", "right": "Impossible √† v√©rifier ‚ùå"}, {"left": "Logiciel Libre üêß", "right": "Transparence totale ‚úÖ"}, {"left": "Obsolescence mat√©rielle ‚ôªÔ∏è", "right": "Gaspillage d''argent et pollution"}]', 'Comprendre ces liens permet de mieux choisir ses outils num√©riques.', 'Un logiciel ferm√©, c''est comme un plat au restaurant dont le chef refuse de donner la liste des ingr√©dients (allergies ?).'),
('match', 'Associez le concept √† sa d√©finition.', '[{"left": "RGPD üá™üá∫", "right": "Protection des donn√©es personnelles"}, {"left": "Interoperabilit√© üîÑ", "right": "Syst√®mes capables de communiquer"}, {"left": "M√©tadonn√©es üè∑Ô∏è", "right": "Infos sur l''info (Qui, Quand, O√π)"}, {"left": "Verrouillage üîó", "right": "Difficult√© de changer de fournisseur"}]', 'Ce sont les piliers de la discussion sur l''√©thique num√©rique.', 'Les m√©tadonn√©es, c''est le facteur qui compte pour la poste (nom, adresse), pas le contenu de la lettre elle-m√™me.'),
('match', 'Reliez l''outil propri√©taire √† son √©quivalent bureautique libre.', '[{"left": "Microsoft Word", "right": "Writer (LibreOffice)"}, {"left": "Google Sheets", "right": "Calc (LibreOffice)"}, {"left": "Microsoft Teams", "right": "Jitsi Meet"}, {"left": "Dropbox", "right": "Nextcloud Files"}]', 'Chaque outil GAFAM a son jumeau √©thique et souvent plus puissant !', 'La diversit√© des outils est synonyme de r√©silience.'),

-- --- TYPE: TEXTE A TROUS (GAP) ---
('gap', 'Compl√©tez cette phrase c√©l√®bre.', '{"sentence": "Si c''est gratuit, c''est que vous √™tes le [1].", "answers": ["produit"], "fake": ["client", "gagnant", "patron"]}', 'Cette phrase r√©sume l''√©conomie de l''attention. Votre temps de cerveau et vos infos sont la monnaie d''√©change.', 'On ne paie pas avec de l''argent, mais avec sa vie priv√©e.'),
('gap', 'Compl√©tez pour comprendre l''Open Source.', '{"sentence": "Un logiciel libre est comme une recette de cuisine : tout le monde a le droit de la [1] et de l''am√©liorer.", "answers": ["partager"], "fake": ["vendre", "cacher", "d√©truire"]}', 'La libert√© de partager et modifier est au c≈ìur du logiciel libre (comme Wikip√©dia).', 'Si vous am√©liorez la recette du g√¢teau au chocolat, tout le monde en profite !'),
('gap', 'La souverainet√© num√©rique.', '{"sentence": "Pour √™tre souveraine, l''√©cole doit garder le [1] sur les donn√©es des √©l√®ves.", "answers": ["contr√¥le"], "fake": ["silence", "monopole", "suspe"]}', 'Garder le contr√¥le signifie savoir exactement o√π sont les donn√©es et qui y touche.', 'C''est √™tre propri√©taire de sa maison plut√¥t que locataire chez Google.'),
('gap', 'L''une des quatre libert√©s fondamentales du logiciel libre est de pouvoir [1] le programme.', '{"sentence": "L''une des quatre libert√©s fondamentales du logiciel libre est de pouvoir [1] le programme.", "answers": ["modifier"], "fake": ["verrouiller", "acheter", "revendre"]}', 'Pouvoir modifier le logiciel permet de l''adapter aux besoins sp√©cifiques de l''enseignement et de corriger les failles de s√©curit√©.', 'Si la porte est mal faite, vous avez le droit de la r√©parer vous-m√™me.'),
('gap', 'Le [1] est une loi europ√©enne qui d√©finit le cadre de la protection des donn√©es personnelles.', '{"sentence": "Le [1] est une loi europ√©enne qui d√©finit le cadre de la protection des donn√©es personnelles.", "answers": ["RGPD"], "fake": ["TVA", "GAAP", "TICE"]}', 'Le RGPD est notre bouclier juridique contre l''exploitation abusive des donn√©es.', 'C''est le code de la route de l''information personnelle.'),

-- Remplissage pour atteindre 35
('choice', 'Quel est le risque de s√©curit√© quand on utilise un logiciel dont le code source est ferm√© ?', '{"options": ["Il co√ªte cher", "Il y a plus de bugs", "Personne ne peut v√©rifier s''il y a des failles ou des portes d√©rob√©es", "Il est trop simple"], "correct": 2}', 'Le code ferm√© est un risque car seule l''entreprise peut le voir. Dans un code ouvert (libre), des milliers d''experts peuvent v√©rifier sa s√©curit√©.', 'C''est comme si votre serrure √©tait brevet√©e : vous ne pouvez pas v√©rifier si elle a des d√©fauts.'),
('choice', 'L''installation de Linux sur d''anciens ordinateurs scolaires permet de lutter contre :', '{"options": ["Le bruit", "L''obsolescence programm√©e", "Le piratage", "Les virus"], "correct": 1}', 'Linux est l√©ger et peu gourmand. Il permet de r√©utiliser des machines de 10 ans, luttant contre le gaspillage √©lectronique.', 'C''est la deuxi√®me vie de vos vieux appareils.'),
('choice', 'Pour l''√©cole, que signifie l''ind√©pendance vis-√†-vis des financements publicitaires ?', '{"options": ["Moins d''argent", "Une meilleure qualit√© d''enseignement", "L''absence de ciblage et de pistage des √©l√®ves", "Plus de publicit√©"], "correct": 2}', 'Si l''outil ne fait pas de publicit√©, il n''a pas besoin de pister les √©l√®ves, garantissant un environnement d''apprentissage neutre.', 'Un cours de maths sans coupure publicitaire sur les jeux vid√©o.'),
('choice', 'CryptPad est un outil de collaboration qui utilise le chiffrement :', '{"options": ["Sur le serveur uniquement", "De bout en bout (client-client)", "Jamais", "Seulement pour les mots de passe"], "correct": 1}', 'Le chiffrement de bout en bout garantit que m√™me le g√©rant du serveur ne peut pas lire le contenu de vos documents.', 'Seuls vous et votre √©quipe avez la cl√© du document.'),
('choice', 'Quelle association fran√ßaise est tr√®s active dans la promotion des alternatives libres √† l''√©cole ?', '{"options": ["Ligue des Champions", "Framasoft", "Google Foundation", "Microsoft France"], "correct": 1}', 'Framasoft est √† l''origine de la campagne ''D√©googlisons Internet'' et propose de nombreux outils libres.', 'Leur mission : un Internet plus √©thique.'),
('choice', 'L''interop√©rabilit√© des syst√®mes informatiques est importante car elle permet :', '{"options": ["D''avoir un seul ordinateur", "Aux diff√©rents logiciels de communiquer entre eux", "De tout mettre sur Google", "De payer moins cher"], "correct": 1}', 'Si les syst√®mes sont interop√©rables, vous n''√™tes pas bloqu√© chez un seul fournisseur.', 'Vous pouvez envoyer une lettre d''une marque de papier √† une autre sans probl√®me.'),
('choice', 'Pourquoi √©viter d''utiliser des plateformes am√©ricaines pour h√©berger les notes des √©l√®ves ?', '{"options": ["Elles sont trop lentes", "Les notes sont trop sensibles pour √™tre sous juridiction √©trang√®re", "Elles sont trop ch√®res", "Les √©l√®ves n''aiment pas"], "correct": 1}', 'Les notes sont des donn√©es sensibles (caract√®re √©ducatif/social) qui doivent rester sous la protection du RGPD.', 'C''est la loi qui l''exige.'),
('choice', 'Un serveur f√©d√©r√©, comme celui de PeerTube, permet de :', '{"options": ["Regarder des vid√©os en 3D", "Cr√©er un r√©seau de petites plateformes vid√©o connect√©es entre elles", "H√©berger des jeux vid√©o", "Pirater des films"], "correct": 1}', 'Chaque √©cole pourrait avoir son propre serveur PeerTube, tout en partageant ses vid√©os avec les autres √©coles (le Fediverse).', 'Comme une cha√Æne d''h√¥tels ind√©pendants qui partagent leur r√©servation en ligne.'),
('choice', 'Quel moteur de recherche donne la priorit√© √† la vie priv√©e ?', '{"options": ["Google", "Bing", "Qwant / DuckDuckGo", "Yahoo"], "correct": 2}', 'Ces moteurs ne tracent pas vos recherches et ne cr√©ent pas de profil publicitaire de vous.', 'Ils effacent leurs traces apr√®s votre passage.'),
('choice', 'L''alternative √† Android pour les t√©l√©phones, qui est d√©googlis√©e, est souvent bas√©e sur :', '{"options": ["Windows", "Une version d''Android sans services Google (ex: /e/OS)", "iOS", "BlackBerry OS"], "correct": 1}', 'Ces syst√®mes suppriment les mouchards Google tout en gardant la compatibilit√© des applications Android.', 'Votre t√©l√©phone, mais sans les cam√©ras cach√©es.'),

-- QCM de remplissage
('choice', 'Quelle suite bureautique libre est la plus utilis√©e par le secteur public en Europe ?', '{"options": ["G Suite", "OnlyOffice / LibreOffice", "Microsoft 365", "Apple iWork"], "correct": 1}', 'De nombreuses administrations migrent vers OnlyOffice (pour la collaboration) ou LibreOffice (pour l''installation locale).', 'C''est la solution choisie par l''arm√©e et la police dans certains pays pour des raisons de s√©curit√©.'),
('choice', 'Quelle est la principale critique faite au logiciel propri√©taire dans l''enseignement ?', '{"options": ["Il co√ªte cher", "Il peut cr√©er une d√©pendance et un monopole", "Il est trop simple √† utiliser", "Il est trop lent"], "correct": 1}', 'Le monopole d''une seule entreprise limite la libert√© de choix et l''innovation.', 'Un seul joueur sur le march√©, c''est rarement bon pour le client.'),
('choice', 'Un VPN permet principalement de :', '{"options": ["T√©l√©charger des films", "Changer de pays virtuellement", "Chiffrer et s√©curiser sa connexion internet", "Bloquer les publicit√©s"], "correct": 2}', 'Dans l''√©ducation, un VPN prot√®ge les donn√©es lors de l''utilisation de Wi-Fi publics ou non s√©curis√©s.', 'C''est un tunnel secret chiffr√©.'),
('choice', 'Qu''est-ce que l''effet de r√©seau dans le contexte des GAFAM ?', '{"options": ["Un bon signal Wi-Fi", "Plus un service a d''utilisateurs, plus il devient indispensable", "Un r√©seau social qui s''√©teint", "Une panne d''internet"], "correct": 1}', 'Plus il y a d''amis sur Facebook, plus il est difficile de partir, m√™me si l''outil ne vous pla√Æt pas.', 'Plus il y a de t√©l√©phones qui utilisent un m√™me chargeur, plus ce chargeur devient la norme.'),
('choice', 'Qu''est-ce qu''un LMS libre ?', '{"options": ["Un syst√®me de gestion de l''apprentissage open source (ex: Moodle)", "Un logiciel de messagerie", "Une application de notes", "Un r√©seau social d''entreprise"], "correct": 0}', 'Moodle permet de cr√©er des cours en ligne, de g√©rer les devoirs et les interactions avec les √©l√®ves, sans frais de licence.', 'La classe virtuelle, sans Big Tech.'),
('choice', 'Quelle est la d√©finition du terme ''m√©tadonn√©e'' ?', '{"options": ["La donn√©e la plus importante", "Les informations qui d√©crivent une donn√©e (ex: l''heure d''un appel)", "Une donn√©e chiffr√©e", "Une donn√©e obsol√®te"], "correct": 1}', 'Les m√©tadonn√©es peuvent r√©v√©ler plus sur vous que le contenu lui-m√™me (ex: parler tous les jours √† l''h√¥pital √† 14h).', 'Ce n''est pas le contenu de la lettre, mais l''√©tiquette de l''enveloppe.'),
('choice', 'Quel est le risque √©thique li√© √† l''utilisation de l''IA des GAFAM pour noter les copies ?', '{"options": ["L''IA est trop lente", "Elle peut perp√©tuer des biais (racisme, sexisme) cach√©s dans les donn√©es d''entra√Ænement", "Elle est trop ch√®re", "Elle ne sait pas lire"], "correct": 1}', 'Les algorithmes apprennent de donn√©es qui peuvent contenir des pr√©jug√©s sociaux. L''opacit√© des syst√®mes propri√©taires rend ce risque invisible.', 'Si l''IA apprend des erreurs du pass√©, elle risque de les reproduire.'),
('choice', 'L''association Framasoft est c√©l√®bre pour sa mission de :', '{"options": ["Vente de logiciels", "D√©googliser Internet", "Promotion d''Apple", "Cr√©ation de jeux vid√©o"], "correct": 1}', 'Elle propose et met en avant une grande quantit√© d''outils libres pour remplacer les services GAFAM.', 'Leur catalogue est une mine d''or pour les √©coles.'),
('choice', 'Pourquoi le logiciel libre est souvent plus s√ªr que le logiciel propri√©taire ?', '{"options": ["Parce qu''il est plus r√©cent", "Parce que des milliers d''yeux peuvent revoir et corriger le code source", "Il est trop compliqu√© pour les hackers", "Il est gratuit"], "correct": 1}', 'C''est le principe du ''plus il y a de monde qui regarde, moins il y a de failles non d√©couvertes''.', 'La s√©curit√© par la transparence, pas par le secret.'),
('choice', 'Dans le cas d''un ENT, la migration vers un service souverain doit toujours √™tre motiv√©e par :', '{"options": ["La mode", "Le co√ªt de la licence (qui est plus cher)", "La conformit√© l√©gale et la protection des donn√©es √©l√®ves", "La vitesse de connexion"], "correct": 2}', 'La priorit√© absolue est la conformit√© au RGPD et la protection des donn√©es sensibles des mineurs.', 'La loi passe avant le confort.'),
('choice', 'Quel est le risque principal des publicit√©s cibl√©es sur les plateformes √©ducatives ?', '{"options": ["Elles sont jolies", "Elles perturbent la concentration et cr√©ent des biais de consommation", "Elles donnent de bonnes id√©es", "Elles n''existent pas"], "correct": 1}', 'L''√©cole doit √™tre un lieu neutre, sans influence publicitaire.', 'L''apprentissage avant la consommation.'),
('choice', 'Un h√©bergeur fran√ßais (certifi√© HDS ou SecNumCloud) est pr√©f√©rable car :', '{"options": ["Il parle fran√ßais", "Il est sous juridiction europ√©enne (RGPD)", "Il est plus rapide", "Il est moins cher"], "correct": 1}', 'La certification garantit que les donn√©es ne peuvent pas √™tre saisies sans mandat europ√©en.', 'Le gendarme est europ√©en, pas am√©ricain.'),
('choice', 'Quel outil libre permet de chiffrer les communications instantan√©es (comme WhatsApp) ?', '{"options": ["Telegram", "Signal", "Skype", "iMessage"], "correct": 1}', 'Signal (ou Olvid) utilise le chiffrement de bout en bout et ne stocke pas les m√©tadonn√©es.', 'La discussion n''est lue que par les deux participants.'),
('choice', 'Pour l''enseignement, le choix d''un syst√®me d''exploitation comme GNU/Linux permet surtout :', '{"options": ["D''√©conomiser l''√©lectricit√©", "De former les √©l√®ves √† l''ouverture technologique et la personnalisation", "De n''avoir aucun virus", "De jouer aux jeux vid√©o"], "correct": 1}', 'Cela montre aux √©l√®ves qu''il existe des alternatives aux syst√®mes dominants (Windows/Mac) et d√©veloppe leur esprit critique.', 'C''est une le√ßon de citoyennet√© num√©rique.');